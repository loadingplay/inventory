{"version":3,"sources":["webpack:///./src/pages/code.jsx"],"names":["dashboard","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","_defineProperty","_assertThisInitialized","call","apply","concat","url","code","split","forEach","item","indexOf","json","Object","keys","map","key","encodeURIComponent","join","data","getCodeFromURL","document","location","href","process","fetch","jsonToQueryString","then","response","json_data","undefined","error","window","localStorage","setItem","access_token","console","log","value","React","createElement","Fragment","Component"],"mappings":"oiEAAkD,IAE7BA,EAAS,SAAAC,I,qRAAAC,CAAAF,EAAAC,GAAA,I,MAAAE,EAAAC,EAAAJ,GAAA,SAAAA,IAAA,IAAAK,EAAAC,EAAA,KAAAN,GAAA,QAAAO,EAAAC,UAAAC,OAAAC,EAAA,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAAF,EAAAE,GAAAJ,UAAAI,GAiD3B,OAjD2BC,EAAAC,EAAAT,EAAAF,EAAAY,KAAAC,MAAAb,EAAA,OAAAc,OAAAP,KAAA,kBAEX,SAACQ,GAChB,IAAIC,EAAO,GAOX,OANAD,EAAIE,MAAM,KAAKC,SAAQ,SAACC,IACjBA,EAAKC,QAAQ,UAChBJ,EAAOG,EAAKF,MAAM,KAAK,OAIpBD,KACRN,EAAAC,EAAAT,GAAA,qBAEmB,SAACmB,GACnB,MAAO,IACLC,OAAOC,KAAKF,GAAMG,KAAI,SAAUC,GAC9B,OAAOC,mBAAmBD,GAAO,IAC/BC,mBAAmBL,EAAKI,OACzBE,KAAK,QACXjB,EAAAC,EAAAT,GAAA,qBAEmB,WAClB,IAGM0B,EAAO,CACX,KAJS1B,EAAK2B,eAAeC,SAASC,SAASC,MAK/C,WAAc,qBACd,UAAa,MACb,cAAiB,mCACjB,aAAgBC,oCAGlBC,MAAM,gDAADpB,OAAiDZ,EAAKiC,kBAAkBP,KAC1EQ,MAAK,SAACC,GAAQ,OAAKA,EAAShB,UAC5Be,MAAK,SAACE,QAEmBC,IAApBD,EAAUE,OAMdC,OAAOC,aAAaC,QAAQ,eAAgBL,EAAUM,cACtDd,SAASC,SAASC,KAAO,cANvBF,SAASC,SAASC,KAAO,OAO3B,OACK,SAACQ,GACNK,QAAQC,IAAIN,SAEjBtC,EAQA,O,EARAL,G,EAAA,EAAA4B,IAAA,SAAAsB,MAED,WACE,OACEC,IAAAC,cAACC,WAAQ,KACPF,IAAAC,cAAA,WAAK,uC,8EAGVpD,EAzD2B,CAASsD","file":"component---src-pages-code-jsx-655b29f16b05c17595dc.js","sourcesContent":["import React, { Component, Fragment } from 'react'\n\nexport default class dashboard extends Component {\n\n  getCodeFromURL = (url) => {\n    let code = \"\";\n    url.split(\"&\").forEach((item) => {\n      if (~item.indexOf(\"code\")) {\n        code = item.split(\"=\")[1];\n      }\n    });\n\n    return code;\n  }\n\n  jsonToQueryString = (json) => {\n    return '?' +\n      Object.keys(json).map(function (key) {\n        return encodeURIComponent(key) + '=' +\n          encodeURIComponent(json[key]);\n      }).join('&');\n  }\n\n  componentDidMount = () => {\n    let code = this.getCodeFromURL(document.location.href);\n\n    // get the access token\n    const data = {\n      \"code\": code,\n      \"grant_type\": \"authorization_code\",\n      \"client_id\": \"437\",\n      \"client_secret\": \"2cd6dff49e2715a7be965dda06e101b5\",\n      \"redirect_uri\": process.env.PROJECT_URL + \"/code\"\n    };\n\n    fetch(`https://accounts.loadingplay.com/oauth2/token${this.jsonToQueryString(data)}`)\n      .then((response) => response.json())\n      .then((json_data) => {\n\n        if (json_data.error !== undefined) {\n          document.location.href = \"/\"\n          return;\n        }\n\n        // persist\n        window.localStorage.setItem(\"access_token\", json_data.access_token);\n        document.location.href = \"/dashboard\"\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div>Generando llave de acceso....</div>\n      </Fragment>\n    )\n  }\n}\n"],"sourceRoot":""}