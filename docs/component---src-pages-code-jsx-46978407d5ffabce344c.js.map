{"version":3,"sources":["webpack:///./src/pages/code.jsx"],"names":["dashboard","getCodeFromURL","url","code","split","forEach","item","indexOf","jsonToQueryString","json","Object","keys","map","key","encodeURIComponent","join","componentDidMount","data","_this","document","location","href","grant_type","client_id","client_secret","redirect_uri","fetch","then","response","json_data","hasOwnProperty","window","localStorage","setItem","access_token","catch","error","console","log","render","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","react__WEBPACK_IMPORTED_MODULE_5__","Component"],"mappings":"6LAEqBA,8JAEnBC,eAAiB,SAACC,GAChB,IAAIC,EAAO,GAOX,OANAD,EAAIE,MAAM,KAAKC,QAAQ,SAACC,IACjBA,EAAKC,QAAQ,UAChBJ,EAAOG,EAAKF,MAAM,KAAK,MAIpBD,KAGTK,kBAAoB,SAACC,GACnB,MAAO,IACLC,OAAOC,KAAKF,GAAMG,IAAI,SAAUC,GAC9B,OAAOC,mBAAmBD,GAAO,IAC/BC,mBAAmBL,EAAKI,MACzBE,KAAK,QAGZC,kBAAoB,WAClB,IAGMC,EAAO,CACXd,KAJSe,EAAKjB,eAAekB,SAASC,SAASC,MAK/CC,WAAc,qBACdC,UAAa,MACbC,cAAiB,mCACjBC,aAAgB,8BAGlBC,MAAK,gDAAiDR,EAAKV,kBAAkBS,IAC1EU,KAAK,SAACC,GAAD,OAAcA,EAASnB,SAC5BkB,KAAK,SAACE,GAEDA,EAAUC,eAAe,SAC3BX,SAASC,SAASC,KAAO,KAK3BU,OAAOC,aAAaC,QAAQ,eAAgBJ,EAAUK,cACtDf,SAASC,SAASC,KAAO,gBAE1Bc,MAAM,SAACC,GACNC,QAAQC,IAAIF,kHAIlBG,OAAA,WACE,OACEC,EAAAC,EAAAC,cAACC,EAAA,SAAD,KACEH,EAAAC,EAAAC,cAAA,6CAtD+BE","file":"component---src-pages-code-jsx-46978407d5ffabce344c.js","sourcesContent":["import React, { Component, Fragment } from 'react'\n\nexport default class dashboard extends Component {\n\n  getCodeFromURL = (url) => {\n    let code = \"\";\n    url.split(\"&\").forEach((item) => {\n      if (~item.indexOf(\"code\")) {\n        code = item.split(\"=\")[1];\n      }\n    });\n\n    return code;\n  }\n\n  jsonToQueryString = (json) => {\n    return '?' +\n      Object.keys(json).map(function (key) {\n        return encodeURIComponent(key) + '=' +\n          encodeURIComponent(json[key]);\n      }).join('&');\n  }\n\n  componentDidMount = () => {\n    let code = this.getCodeFromURL(document.location.href);\n\n    // get the access token\n    const data = {\n      \"code\": code,\n      \"grant_type\": \"authorization_code\",\n      \"client_id\": \"437\",\n      \"client_secret\": \"2cd6dff49e2715a7be965dda06e101b5\",\n      \"redirect_uri\": \"http://localhost:8000/code\"\n    };\n\n    fetch(`https://accounts.loadingplay.com/oauth2/token${this.jsonToQueryString(data)}`)\n      .then((response) => response.json())\n      .then((json_data) => {\n\n        if (json_data.hasOwnProperty(\"error\")) {\n          document.location.href = \"/\"\n          return;\n        }\n\n        // persist\n        window.localStorage.setItem(\"access_token\", json_data.access_token);\n        document.location.href = \"/dashboard\"\n      })\n      .catch((error) => {\n        console.log(error);\n      });\n  }\n\n  render() {\n    return (\n      <Fragment>\n        <div>Generate access token....</div>\n      </Fragment>\n    )\n  }\n}\n"],"sourceRoot":""}